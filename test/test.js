const convertB1toB0 = require('../index');
const assert = require('assert');
const expect = require('chai').expect
describe('0xB1 to 0xB0 Convertor', () => {
  describe('Invalid 0xB1 code', () => {
    it('should throw an error on invalid input', function() {
      expect(convertB1toB0.bind('')).throw('invalid input');
      expect(convertB1toB0.bind('AAB103009602C602DA28181855')).throw('invalid input');
      expect(convertB1toB0.bind('AA B1 03 0096 02C6 02DA 28181855')).throw('invalid input');
      expect(convertB1toB0.bind('AAA055')).throw('invalid input');
    });
  });
  describe('0xB1 to 0xB0 code conversion', () => {
    it('should convert to the correct value', () => {
      const codes = [
        {
          b1: 'AA B1 04 1374 0276 0118 1388 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
          b0: 'AA B0 4C 04 08 1374 0276 0118 1388 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
        },
        {
          b1: 'AA B1 04 1360 0276 0122 1388 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
          b0: 'AA B0 4C 04 08 1360 0276 0122 1388 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
        },
        {
          b1: 'AA B1 03 0096 02C6 02DA 281818 55',
          b0: 'AA B0 0B 03 08 0096 02C6 02DA 281818 55',
        },
        {
          b1: 'AA B1 04 1360 0276 010E 136A 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
          b0: 'AA B0 4C 04 08 1360 0276 010E 136A 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
        },
        {
          b1: 'AA B1 03 00A0 02BC 02DA 281818 55',
          b0: 'AA B0 0B 03 08 00A0 02BC 02DA 281818 55',
        },
        {
          b1: 'AA B1 04 1374 0276 010E 136A 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
          b0: 'AA B0 4C 04 08 1374 0276 010E 136A 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
        },
        {
          b1: 'AA B1 04 010E 023A 1360 024E 38192A 55',
          b0: 'AA B0 0D 04 08 010E 023A 1360 024E 38192A 55',
        },
        {
          b1: 'AA B1 03 0104 0258 0258 281818 55',
          b0: 'AA B0 0B 03 08 0104 0258 0258 281818 55',
        },
        {
          b1: 'AA B1 04 0118 023A 1360 024E 38192A 55',
          b0: 'AA B0 0D 04 08 0118 023A 1360 024E 38192A 55',
        },
        {
          b1: 'AA B1 03 0104 024E 0262 281818 55',
          b0: 'AA B0 0B 03 08 0104 024E 0262 281818 55',
        },
        {
          b1: 'AA B1 04 1360 0276 0118 1388 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
          b0: 'AA B0 4C 04 08 1360 0276 0118 1388 38192A192A1A1A19292A1A19292929292A19292A1929292A1A192A192A1A19292A1A1A1A1A1A1A1A192A1A1A1A1A1A1A1A1A1A1A1A192A192929292A1A19292A1A19 55',
        },
        {
          b1: 'AA B1 03 0410 014A 277E 28190819081819081819090818190818181819081909090819 55',
          b0: 'AA B0 21 03 08 0410 014A 277E 28190819081819081819090818190818181819081909090819 55',
        },
        {
          b1: 'AA B1 03 0410 0154 11F8 28190819081819081819090818190818181818 55',
          b0: 'AA B0 1B 03 08 0410 0154 11F8 28190819081819081819090818190818181818 55',
        },
        {
          b1: 'AA B1 03 0406 0154 276A 28190819081819081819090818190818181819081909090819 55',
          b0: 'AA B0 21 03 08 0406 0154 276A 28190819081819081819090818190818181819081909090819 55',
        },
        {
          b1: 'AA B1 03 0406 0154 11EE 28190819081819081819090818190818181818 55',
          b0: 'AA B0 1B 03 08 0406 0154 11EE 28190819081819081819090818190818181818 55',
        },
        {
          b1: 'AA B1 03 041A 0140 2724 28190819081819081819090818190818181819081909090819 55',
          b0: 'AA B0 21 03 08 041A 0140 2724 28190819081819081819090818190818181819081909090819 55',
        },
      ];
      codes.forEach((pair) => {
        assert.equal(convertB1toB0(pair.b1), pair.b0);
      })
    });
  });
});
